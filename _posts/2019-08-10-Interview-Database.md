---
layout:     post         
title:      "数据库"
date:       2019-08-10 12:00:00             # 时间
author:     "Alex"                          # 作者
header-img: "img/animate-bg/bg1-min.jpg"
catalog: true                               # 是否归档
tags:                                       # 标签，可多个
    - Interview
---

## 基础

[数据库脏读、事务的四大特性、四大隔离级别、三大范式](https://blog.csdn.net/qq_34569497/article/details/79064208)

* **四大特性: ACID**
  * 原子性 Atomicity: 事务包含的所有数据库操作要么全部成功，要不全部失败回滚
  * 一致性 Consistency: 一个事务执行之前和执行之后都必须处于一致性状态。拿转账来说，假设用户A和用户B两者的钱加起来一共是5000，那么不管A和B之间如何转账，转几次账，事务结束后两个用户的钱相加起来应该还得是5000，这就是事务的一致性。
  * 隔离性 Isolation: 一个事务未提交的业务结果是否对于其它事务可见。级别一般有:read_uncommit，read_commit，read_repeatable，串行化访问。
  * 持久性 Durability: 一个事务一旦被提交了，那么对数据库中数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。

* **隔离级别**: 由低到高依次为Read uncommitted 、Read committed 、Repeatable read 、Serializable
    ||脏读|不可重复读|幻读|
    |--|--|--|--|
    |Read uncommitted|√|√|√|
    |Read committed|×|√|√|
    |Repeatable read|×|×|√|
    |Serializable|×|×|×|
  * 脏读是指在一个事务处理过程里读取了另一个未提交的事务中的数据。
  * 不可重复读是指在对于数据库中的某个数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了。

        不可重复读和脏读的区别是，脏读是末一事务读取了另一个事务未提交的脏数据，
        而不可重复读则是读取了前一事务提交的数据
  * 幻读是事务非独立执行时发生的一种现象。

* **三大范式**
  * 第一范式(确保每列保持原子性)
  * 第二范式(确保表中的每列都和主键相关)
  * 第三范式(确保每列都和主键列直接相关,而不是间接相关)

## 索引

数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。实现通常使用B树及其变种B+树。

[工作原理及其种类](https://blog.csdn.net/kennyrose/article/details/7532032)

**优点:**

1. 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。
2. 可以大大加快数据的检索速度，这也是创建索引的最主要的原因。
3. 可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义。
4. 在使用分组和排序子句进行数据检索时，同样可以显著减少查询中分组和排序的时间。
5. 通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。

**缺点:**

1. 创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加。
2. 索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚簇索引，那么需要的空间就会更大。
3. 当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护速度。

`主键ID，主键既是约束也是特殊的唯一索引，同时也用于对象缓存的键值`

[B+树比B树更适合做文件索引的原因](https://blog.csdn.net/mine_song/article/details/63251546)

根据数据库的功能，可以在数据库设计器中创建三种索引：唯一索引、主键索引和聚集索引。

## 视图

视图（view）是一种虚拟存在的表，是一个逻辑表，本身并不包含数据。作为一个select语句保存在数据字典中的。视图主要用于简化检索，保护数据，并不用于更新，而且大部分视图都不可以更新。

## 语法

* [Where & Having 区别](https://blog.csdn.net/yexudengzhidao/article/details/54924471)
* [MySQL 存储过程](https://www.runoob.com/w3cnote/mysql-stored-procedure.html)

[Reference](https://blog.csdn.net/justloveyou_/article/details/78308460)
